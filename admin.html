<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>M√≠t t·ªù Lee ‚Äì Admin</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body{font-family:Arial;background:#fff3e0;padding:16px}
button{background:#d32f2f;color:#fff;border:none;padding:12px;border-radius:6px}
table{width:100%;border-collapse:collapse;margin-top:10px}
td,th{border:1px solid #ccc;padding:6px;font-size:14px}
</style>
</head>

<body>

<h3>üîê M√çT T·ªú LEE ‚Äì ADMIN</h3>
<input id="pass" type="password" placeholder="M·∫≠t kh·∫©u reset">
<button id="reset">RESET</button>
<div id="status"></div>

<table>
<thead><tr><th>T√™n</th><th>Gi·∫£i</th><th>Gi√° tr·ªã</th></tr></thead>
<tbody id="list"></tbody>
</table>

<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>

<script>
firebase.initializeApp({
  apiKey: "AIzaSyCLGVLJ-S2uyptD8-0I5MrqeOOBE6g2AD0",
  projectId: "premium-bastion-300803"
});
const db=firebase.firestore();
const PASS="reset2026";

async function load(){
  const list=document.getElementById("list");
  list.innerHTML="";
  const snap=await db.collection("lixi").get();
  snap.forEach(d=>{
    const x=d.data();
    list.innerHTML+=`<tr><td>${x.name}</td><td>${x.prize}</td><td>${x.value}</td></tr>`;
  });
}

document.getElementById("reset").onclick=async()=>{
  if(document.getElementById("pass").value!==PASS){
    alert("Sai m·∫≠t kh·∫©u");return;
  }
  document.getElementById("status").innerHTML="ƒêang reset...";

  const lixi=await db.collection("lixi").get();
  for(const d of lixi.docs) await d.ref.delete();

  const defaults={
    "loc-dac-biet":1,
    "loc-dai-xuan":1,
    "loc-nhu-y":3,
    "loc-an-khang":5,
    "loc-binh-an":5,
    "loc-may-man":10
  };

  const prizes=await db.collection("prizes").get();
  for(const p of prizes.docs){
    if(defaults[p.id]!=null) await p.ref.update({qty:defaults[p.id]});
  }

  document.getElementById("status").innerHTML="‚úÖ Reset xong";
  load();
};

load();
</script>

</body>
</html>
